# -*- makefile -*-
## -----------------------------------------------------------------------
## -----------------------------------------------------------------------

logdir  := logs

dirs	+= data
dirs	+= $(logdir)
deps	+= $(dirs)

lib-deps += lib/config.sh
lib-deps += lib/prompt.sh
deps     += $(lib-deps)

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
all: $(deps)
	./mygh.sh 2>&1 | tee $(logdir)/$@.log

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
$(dirs):
	mkdir -p $@

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
$(lib-deps):
	lib/gen_config.sh

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
init: $(dirs)
	lib/gen_config.sh 2>&1 | tee $(logdir)/$@.log

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
clean:
	$(RM) -r data
	$(RM) lib/config.sh
	$(RM) lib/prompt.sh
	$(RM) -r $(logdir)

sterile : clean

# [EOF]
