# -*- makefile -*-
## ---------------------------------------------------------------------------
## ---------------------------------------------------------------------------

# DEBUG       := true

.PHONY: validate
.DEFAULT_GOAL := validate

##-------------------##
##---]  GLOBALS  [---##
##-------------------##
include $(strip \
  $(dir \
    $(abspath $(lastword $(MAKEFILE_LIST)))\
  )\
)/makefiles/include.mk

# TOP         ?= .
# MAKEDIR     ?= $(TOP)/makefiles

# NO-LINT-MAKEFILE := true    # cleanup needed
NO-LINT-PYTHON   := true    # cleanup needed
NO-LINT-SHELL    := true    # cleanup needed

# include $(ONF_MAKEDIR)/include.mk

tgts += checkout-repos-all

##---------------------##
##---]  MAKEFILES  [---##
##---------------------##
all: $(tgts)

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
clean ::

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
sterile ::
	$(RM) -r sandbox
	$(MAKE) triage-clean

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
gather:
	find sandbox -name 'VERSION' -print0 | xargs -0 cat

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
validate:
	$(MAKE) -C validate

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
view:
	pandoc README.md | lynx -stdin

## -----------------------------------------------------------------------
## -----------------------------------------------------------------------
triage:
	./triage.sh 2>&1 | tee $@.log

triage-clean:
	$(RM) -r tmp

## ---------------------------------------------------------------------------
## ---------------------------------------------------------------------------
prep:
	$(onf-mk-root)/go_mod/fix_go_mod.sh
	@echo '[TODO]: ../etc/copyright_fix.sh'

# [EOF]
